<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <title>Socket to ya</title>

  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.8thwall.com/web/aframe/aframe-extras-6.1.0.min.js"></script>

  <!-- <script src="https://cdn.8thwall.com/web/aframe/8frame-1.3.0.min.js"></script> -->
  <!-- <script src="https://apps.8thwall.com/xrweb?appKey=XXXX"></script> -->
  <!-- <script src="https://cdn.8thwall.com/web/xrextras/xrextras.js"></script> -->
  <!-- <script src='https://cdn.8thwall.com/web/landing-page/landing-page.js'></script> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
</head>

<body>
    <a-scene
      renderer="colorManagement: true">
    <a-assets>
      <!-- <a-asset-item id="sandCastleModel"
        src="./assets/models/sand-castle.glb">
      </a-asset-item> -->

      <!-- <img id="UV"
        src="./assets/models/textures/uv.jpg" /> -->
    </a-assets>

    <a-camera id="camera"
      position="0 1.6 2"
      raycaster="objects: .cantap"
      cursor="fuse: false; rayOrigin: mouse;">
    </a-camera>

    <a-entity light="
        type: directional;
        intensity: 0.8;
        castShadow: true;
        shadowMapHeight:2048;
        shadowMapWidth:2048;
        shadowCameraTop: 10;
        target: #model;"
        shadow>
        <!-- xrextras-attach="target: model; offset: 1 15 3;" -->
    </a-entity>

    <a-light type="ambient"
      intensity="0.7">
    </a-light>

    <a-box
      rotation="0 5 0"
      position="1 0.5 -0.3">
    </a-box>

    <!-- <a-entity id="model"
      gltf-model="#sandCastleModel"
      position="0 0 0"
      scale="1 1 1"
      shadow="receive: true; cast:true;">
    </a-entity> -->

    <a-plane id="ground"
      class="cantap"
      rotation="-90 0 0"
      width="20"
      height="20"
      material="src: #UV; color: green"
      shadow>
    </a-plane>

  </a-scene>

  <script>
    const ws = new WebSocket(`wss://${window.location.host}/`);
    console.log('Client ws:', ws);
    ws.addEventListener('error', (e) => { console.log("server error", e); });
    ws.addEventListener('open', (e) => { console.log("websocket connection open"); });
    ws.addEventListener('close', (e) => {
      console.log("websocket connection closed");
      console.log(e);  
    });
    ws.addEventListener('message', (e) => {
      console.log(e.data)
    });
  </script>
</body>

</html>